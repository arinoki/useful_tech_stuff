[English version](README_en.md)

## Описание

Этот Python-скрипт предназначен для автоматизации создания M3U8-плейлистов из вашей музыкальной коллекции. Он рекурсивно обходит указанную корневую папку, извлекает метаданные исполнителя из аудио-файлов (с помощью библиотеки mutagen) и группирует треки по исполнителям. Для каждого исполнителя создаётся один или несколько плейлистов (если треков больше 500, то разбивается на части с нумерацией). Пути к трекам в плейлистах — абсолютные.

Поддерживаемые форматы аудио: MP3, OPUS, OGG, M4A, FLAC, WAV, AAC, WMA, APE, ALAC, AIFF.

### Особенности
- Группировка треков по исполнителю на основе метадат (тег "artist").
- Разбиение плейлистов на части по 500 треков (например, "Artist.m3u8", "Artist_2.m3u8").
- Исключение указанных папок (по умолчанию — "!!youtube", но можно настроить).
- Если корневая папка совпадает с исключённой, то исключение игнорируется.
- Сортировка треков по имени файла.
- Интерактивный ввод путей при запуске (или через аргументы командной строки).
- Обработка ошибок и UTF-8 для поддержки кириллицы.

### Требования
- Python 3.x (тестировалось на 3.12+).
- Библиотека `mutagen` для чтения метадат: установите с помощью `pip install mutagen`.

Стандартные библиотеки: `os`, `sys`, `collections`.

### Установка
1. Клонируйте репозиторий:
   ```
   git clone https://github.com/arinoki/useful_tech_stuff.git
   ```
2. Установите зависимости:
   ```
   pip install mutagen
   ```

### Использование
Запустите скрипт:
```
python folder_to_playlists.py [root_dir] [playlists_dir]
```
- Если аргументы не указаны, скрипт спросит интерактивно (нажмите Enter для дефолтных значений).
- Дефолтная корневая папка: `C:/!!Downloads/Music`.
- Дефолтная папка для плейлистов: `C:/Users/arinoki/Desktop/playlists`.

#### Конфигурация
В скрипте можно настроить:
- `DEFAULT_ROOT_DIR`: Дефолтная корневая папка.
- `DEFAULT_PLAYLISTS_DIR`: Дефолтная папка для плейлистов.
- `AUDIO_EXTS`: Список расширений аудио-файлов.
- `EXCLUDED_DIRS`: Список абсолютных путей к исключённым папкам (например, для "!!youtube").

Если метаданные отсутствуют или нечитаемы, исполнитель помечается как "Unknown".

### Пример
Предположим, у вас структура:
```
C:/!!Downloads/Music/
├── Artist1/
│   └── Album1/
│       ├── track1.mp3
│       └── track2.flac
└── Artist2/
    └── track3.ogg
```
Скрипт создаст:
- `Artist1.m3u8` с абсолютными путями к track1 и track2.
- `Artist2.m3u8` с путём к track3.

Если в "!!youtube" есть файлы, они пропустятся, если не указать её как root_dir.

### Лицензия
CC BY‑NC‑SA 4.0

### Автор
Arinoki